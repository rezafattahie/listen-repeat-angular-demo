<div class="bg-white rounded-2xl shadow p-5 border border-slate-100">
    <div class="flex flex-wrap items-center gap-2">
        <button class="rounded-xl border px-3 py-2 transition hover:bg-slate-100 hover:cursor-pointer"
            (click)="vm.prev()">
            Prev
        </button>
        <button class="rounded-xl border px-3 py-2 transition hover:bg-slate-100 hover:cursor-pointer"
            (click)="vm.next()">
            Next
        </button>
        <button class="rounded-xl border px-3 py-2 transition hover:bg-slate-100 hover:cursor-pointer"
            (click)="vm.pauseAll()">
            Stop
        </button>

        <button
            class="rounded-xl px-3 py-2 transition hover:cursor-pointer border border-indigo-600 bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50"
            (click)="vm.playCurrent()" [disabled]="!vm.currentSentence() || vm.isAutoPlay()">
            Play current
        </button>

        <button
            class="rounded-xl px-3 py-2 transition hover:cursor-pointer border border-emerald-600 bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-50"
            (click)="vm.playAll()" [disabled]="vm.isAutoPlay()">
            Play all
        </button>

        <button
            class="rounded-xl px-3 py-2 transition hover:cursor-pointer border border-rose-600 bg-rose-600 text-white hover:bg-rose-700"
            (click)="vm.stopProcess()">
            Stop process
        </button>

        <button class="rounded-xl border px-3 py-2 transition hover:bg-slate-100 hover:cursor-pointer ml-auto"
            (click)="vm.toggleTranslation()" title="Toggle translation language">
            Translation: {{ vm.translationMode() === "fa" ? "FA" : "EN" }}
        </button>
    </div>

    <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3">
        <div class="rounded-xl border p-3">
            <div class="text-xs text-slate-600 mb-1">Time until mic starts (x duration)</div>
            <input class="w-full" type="range" min="0" max="2" step="0.1" [value]="vm.micDelayRatio()"
                (input)="vm.micDelayRatio.set(+$any($event.target).value)" />
            <div class="flex justify-between text-xs text-slate-600 mt-1">
                <span>Ratio: {{ vm.micDelayRatio() }} • Current: {{ (vm.micDelayMs() / 1000) | number : "1.1-1"
                    }}s</span>
                <button class="rounded-xl text-xs text-sky-400 hover:text-sky-600 transition hover:bg-slate-100 hover:cursor-pointer"
                    (click)="resetRatios()" title="Reset mic delay and listening time ratios to defaults">
                    Reset
                </button>
            </div>

        </div>

        <div class="rounded-xl border p-3">
            <div class="text-xs text-slate-600 mb-1">Listening time (x duration)</div>
            <input class="w-full" type="range" min="0.5" max="3" step="0.1" [value]="vm.listenWindowRatio()"
                (input)="vm.listenWindowRatio.set(+$any($event.target).value)" />
            <div class="flex justify-between text-xs text-slate-600 mt-1">
                <span>Ratio: {{ vm.listenWindowRatio() }} • Current: {{ (vm.listenWindowMs() / 1000) | number : "1.1-1"
                    }}s</span>
                <button class="rounded-xl text-xs text-sky-400 hover:text-sky-600 transition hover:bg-slate-100 hover:cursor-pointer"
                    (click)="resetRatios()" title="Reset mic delay and listening time ratios to defaults">
                    Reset
                </button>
            </div>

        </div>
    </div>

    <div class="text-xs text-slate-500 mt-3">
        Browser mic support:
        <span class="font-medium" [class.text-emerald-700]="vm.speechSupported()"
            [class.text-amber-700]="!vm.speechSupported()">
            {{ vm.speechSupported() ? "Supported" : "Not supported (try Chrome)" }}
        </span>
    </div>
</div>